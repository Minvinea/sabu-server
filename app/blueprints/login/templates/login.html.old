<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>test login</title>
</head>
<body>

{{ form.hidden_tag() }}

{{ form.username }}
{{ form.password }}
<!-- {{ form.otpcode }} -->
{{ form.submit }}

<span id="error"></span>

<script src="{{ url_for('static',filename='script/jquery-3.5.1.min.js') }}"></script>
<script type="text/javascript">
// $(document).ready(function(){
// 	$('#submit').click(function() {
// 		url = location.protocol+"//"+document.domain+":"+location.port+"/login/verif" ;
//     	var data = {
//     		username:document.getElementById("username").value,
//     		password:document.getElementById("password").value,
//     		csrf_token:document.getElementById("csrf_token").value,
//     		submit:"submit"
//     	};
//     	var jsonData = JSON.stringify(data);

// 		var xhr = new XMLHttpRequest()
// 		xhr.open("POST", url, true);
// 		xhr.setRequestHeader("Content-Type", "application/json; charset=UTF-8");
// 		xhr.setRequestHeader('X-CSRFToken', $('#csrf_token').val());
// 		xhr.onreadystatechange = function () {
//         if (xhr.readyState === 4 && xhr.status === 200) {
//             	var res = JSON.parse(xhr.response);
//             	if(res["totp"] == "off"){
//             		window.location.reload();
//             	}else if(res["totp"] == "on"){
//             		alert("totp");
//             	}else if(res["error"]){
//             		$("#error").text(res["error"]);
//             	}
//            		console.log(res);
// 	        }
// 	    };

//     	xhr.send(jsonData);
//     });
// });
</script>
</body>
</html>